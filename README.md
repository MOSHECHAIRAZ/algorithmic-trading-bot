# 🤖 בוט מסחר אלגוריתמי (מעקב מגמה + למידת מכונה + VIX)

## 📝 סקירה כללית

פרויקט זה הוא בוט מסחר אלגוריתמי מודולרי המשלב אסטרטגיית מעקב מגמה, מודל למידת מכונה (Machine Learning), וניתוח מדד התנודתיות (VIX). המערכת בנויה מרכיבי Python (לאיסוף ועיבוד נתונים, אימון מודלים ו-API) ו-Node.js (לסוכן המסחר).

### 🏛️ ארכיטקטורה

- **Backend (שרת צד-שרת):** `api_server.py` - שרת API מבוסס Flask, הכולל תמיכה ב-WebSockets לעדכונים בזמן אמת, ניהול תהליכים, וחושף API עשיר לכלל המערכת.
- **Frontend (צד-לקוח):** `dashboard.html` - דשבורד ניהול אינטראקטיבי ומודרני, המאפשר שליטה מלאה על המערכת, ניטור בזמן אמת, וניתוח תוצאות.
- **סוכן מסחר (Node.js):** `agent/trading_agent.js` - רכיב המבצע את פקודות המסחר בפועל מול הברוקר (Interactive Brokers), על בסיס התחזיות המתקבלות מה-API.

### 🗂️ מבנה תיקיות

- `src/` - קוד המקור של רכיבי ה-Python (איסוף נתונים, עיבוד, אימון).
- `agent/` - קוד המקור של סוכן המסחר (Node.js).
- `data/` - נתונים גולמיים, מעובדים, ופיצ'רים.
- `models/` - מודלים מאומנים, קבצי תצורה וסיכומי אימון.
- `reports/` - דוחות, גרפים ותוצאות ניתוחים.
- `archive/` - גיבויים, לוגים ישנים וקבצים שהוצאו משימוש.

---

## 🚀 התקנה והפעלה

### 1. התקנת תלויות

ודא שהתקנת את **Python 3.10+**, **Node.js 18+**, וספריית **TA-Lib**.

לאחר מכן, התקן את כל התלויות באמצעות הפקודות הבאות:

```bash
# התקנת תלויות Python
pip install -r requirements.txt

# התקנת תלויות Node.js
npm install
```

> **הערה:** להתקנת **TA-Lib**, עקוב אחר ההוראות המפורטות במדריכים הרשמיים עבור מערכת ההפעלה שלך.

### 2. הפעלת המערכת

המערכת דורשת הפעלה של שני רכיבים עיקריים:

**א. הפעלת השרת והדשבורד:**

```bash
python api_server.py
```

פקודה זו תפעיל את שרת ה-API ותהפוך את הדשבורד לזמין.

**ב. כניסה לדשבורד:**

פתח דפדפן וגש לכתובת הבאה:
[http://127.0.0.1:5001](http://127.0.0.1:5001)

הסיסמה הראשונית לכניסה היא `admin`.

**ג. הפעלת סוכן המסחר:**

ניתן להפעיל את סוכן המסחר ישירות מהדשבורד החדש, תחת עמוד "סטטוס מערכת" או "סוכן מסחר".

---

## ⚙️ תצורה

**כל הגדרות המערכת מנוהלות באופן מרכזי בקובץ `system_config.json`.**

- **עריכה מומלצת:** הדרך הבטוחה והנוחה ביותר לערוך את ההגדרות היא דרך הדשבורד, בעמוד "תצורת מערכת".
- **עריכה ידנית:** ניתן לערוך את הקובץ `system_config.json` ישירות, אך יש להפעיל מחדש את הרכיבים הרלוונטיים כדי שהשינויים ייכנסו לתוקף.

---

## 🌊 זרימת עבודה

1.  **איסוף נתונים:** איסוף נתוני SPY ו-VIX עדכניים לתיקיית `data/raw/`.
2.  **עיבוד וניקוי:** עיבוד הנתונים הגולמיים ושמירתם ב-`data/processed/`.
3.  **הנדסת פיצ'רים ואימון מודל:** הרצת `main_trainer.py` יוצרת פיצ'רים טכניים, סטטיסטיים ומשלבי VIX, מבצעת אופטימיזציה של היפר-פרמטרים באמצעות Optuna, מאמנת מודל LightGBM, ושומרת את התוצרים (מודל, scaler, תצורה) בתיקיית `models/`.
4.  **בקטסטינג:** הרצת `backtester.py` על מודל מאומן כדי להעריך את ביצועיו על נתונים היסטוריים.
5.  **מסחר חי:** סוכן המסחר ב-Node.js משתמש במודל ה"אלוף" (Champion) דרך ה-API כדי לקבל החלטות מסחר ולבצע פקודות מול הברוקר.

כל התהליכים הללו ניתנים להפעלה, ניטור ובקרה דרך הדשבורד.
