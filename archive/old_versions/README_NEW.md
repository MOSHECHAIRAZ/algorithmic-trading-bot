# בוט מסחר אלגוריתמי

מערכת למסחר אלגוריתמי המשלבת למידת מכונה, בדיקות אחורה, ואינטגרציה עם Interactive Brokers.

## מבנה המערכת

המערכת מורכבת מהרכיבים הבאים:
- **שרת API (Python/Flask)**: מנהל את המערכת, מספק ממשק REST API, ומריץ תהליכים.
- **סוכן מסחר (Node.js)**: מתקשר עם Interactive Brokers ומבצע פעולות מסחר.
- **ממשק משתמש (HTML/JavaScript)**: דשבורד לניהול וניטור המערכת.
- **מודלים של למידת מכונה**: חיזוי תנועות מחיר ואיתות מסחר.

## התקנה

### דרישות מקדימות
- Python 3.10+
- Node.js 18+
- Interactive Brokers Gateway מותקן
- חשבון Interactive Brokers פעיל

### התקנת חבילות Python
```bash
pip install -r requirements.txt
```

### התקנת חבילות Node.js
```bash
cd agent
npm install
```

### הגדרת קובץ .env
יש ליצור קובץ `.env` בתיקייה הראשית עם המשתנים הבאים:
```
IBKR_USERNAME=<שם משתמש IBKR>
IBKR_PASSWORD=<סיסמת IBKR>
DASHBOARD_PASSWORD=<סיסמת דשבורד>
API_PORT=5000
```

## הפעלה

### הפעלת שרת ה-API
```bash
python api_server_refactored.py
```

### הפעלת ה-Gateway
```bash
python start_ibkr.py
```

### גישה לדשבורד
פתחו דפדפן בכתובת:
```
http://localhost:5000/dashboard
```

## שינויים אחרונים
המערכת עוברת כעת ארגון מחדש משמעותי. ראו את הקבצים הבאים למידע נוסף:
- `REFACTORING_PLAN.md` - תוכנית הארגון מחדש המפורטת
- `PROJECT_REORGANIZATION.md` - סיכום השינויים שכבר בוצעו

## תהליך הפיתוח

### מחזור פיתוח אופייני
1. **איסוף נתונים**: הורדת נתוני מחיר היסטוריים מ-IBKR.
2. **עיבוד נתונים**: חישוב אינדיקטורים טכניים ותכונות.
3. **אימון מודל**: אימון וכוונון מודלים באמצעות Optuna.
4. **בדיקה אחורה**: הרצת המודל על נתונים היסטוריים לבדיקת ביצועים.
5. **פריסה**: הפעלת המודל בזמן אמת עם חיבור ל-IBKR.

## הערות חשובות

### אבטחה
- **אין לכלול פרטי התחברות בקוד או ב-Git**. השתמשו תמיד בקובץ `.env` שנמצא ב-`.gitignore`.
- יש להשתמש בסיסמה חזקה לדשבורד.

### חיבור ל-IBKR
המערכת משתמשת בשתי גישות לחיבור ל-IBKR:
1. **סוכן Node.js**: משתמש בספריית `@stoqey/ib` לתקשורת ישירה עם ה-API.
2. **אוטומציה של UI**: משתמש ב-`pyautogui` לתהליך ההתחברות (בתהליך הוצאה משימוש).

## פיתוח עתידי
- הוצאת השימוש ב-`pyautogui` והחלפתו במנגנון יציב יותר.
- שיפור הארכיטקטורה לקוד מודולרי יותר.
- הוספת יותר בדיקות אוטומטיות.

## רישיון
זכויות יוצרים (c) 2025. כל הזכויות שמורות.
